

<div class="py-6">
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900">Products</h1>
        <p class="text-gray-600">Manage your menu items</p>
    </div>

    <!-- Products Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        <% if (products.length === 0) { %>
            <div class="col-span-full text-center py-12">
                <div class="text-gray-500">
                    <i class="fas fa-box text-4xl mb-4"></i>
                    <p class="text-lg font-medium">No products found</p>
                    <p class="text-sm">Products will appear here once they are added to the system</p>
                </div>
            </div>
        <% } else { %>
            <% products.forEach(product => { %>
                <div class="bg-white rounded-lg shadow hover:shadow-md transition-shadow">
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-lg font-medium text-gray-900 line-clamp-2">
                                <%= product.name %>
                            </h3>
                            <span class="text-lg font-bold text-amber-600">
                                €<%= product.price.toFixed(2) %>
                            </span>
                        </div>
                        
                        <div class="mb-4">
                            <span class="inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full">
                                <%= product.category %>
                            </span>
                        </div>
                        
                        <% if (product.description) { %>
                            <p class="text-sm text-gray-600 mb-4 line-clamp-3">
                                <%= product.description %>
                            </p>
                        <% } %>
                        
                        <div class="flex justify-between items-center text-xs text-gray-500">
                            <span>ID: <%= product.id %></span>
                            <span>
                                <i class="fas fa-check-circle text-green-500"></i>
                                Active
                            </span>
                        </div>
                    </div>
                </div>
            <% }); %>
        <% } %>
    </div>

    <!-- Summary Stats -->
    <div class="mt-8 bg-white rounded-lg shadow p-6">
        <h2 class="text-lg font-medium text-gray-900 mb-4">Product Summary</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="text-center">
                <div class="text-2xl font-bold text-gray-900"><%= products.length %></div>
                <div class="text-sm text-gray-500">Total Products</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-gray-900">
                    <%= [...new Set(products.map(p => p.category))].length %>
                </div>
                <div class="text-sm text-gray-500">Categories</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-gray-900">
                    €<%= products.length > 0 ? (products.reduce((sum, p) => sum + p.price, 0) / products.length).toFixed(2) : '0.00' %>
                </div>
                <div class="text-sm text-gray-500">Average Price</div>
            </div>
        </div>
    </div>

    <!-- Categories Breakdown -->
    <% if (products.length > 0) { %>
        <div class="mt-8 bg-white rounded-lg shadow p-6">
            <h2 class="text-lg font-medium text-gray-900 mb-4">Categories</h2>
            <div class="space-y-3">
                <% 
                const categories = {};
                products.forEach(product => {
                    if (!categories[product.category]) {
                        categories[product.category] = [];
                    }
                    categories[product.category].push(product);
                });
                %>
                <% Object.keys(categories).forEach(category => { %>
                    <div class="flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0">
                        <div>
                            <span class="font-medium text-gray-900"><%= category %></span>
                            <span class="text-sm text-gray-500 ml-2">
                                (<%= categories[category].length %> items)
                            </span>
                        </div>
                        <div class="text-sm text-gray-600">
                            €<%= (categories[category].reduce((sum, p) => sum + p.price, 0) / categories[category].length).toFixed(2) %> avg
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    <% } %>
</div>

<style>
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
</style>
